# SPDX-License-Identifier: Apache-2.0
# Copyright 2022 Martin Schr√∂der <info@swedishembedded.com>
# This CMake file is for Zephyr use.
if(CONFIG_CONTROL)

  zephyr_include_directories(../include)
  # Make sure M_PI is available
  zephyr_compile_options("-D__XSI_VISIBLE")

  zephyr_library()
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/optimization/linprog.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/insert.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/randn.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/cut.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/stddev.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/cat.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/constrain.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/mean.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/sign.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/misc/print.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/ai/a_star.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/ai/inpolygon.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/mpc.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/mrac.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/lqi.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/theta2ss.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/kalman.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/c2d.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/pid.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/dynamics/stability.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/motion/motion_profile.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/model/dc_motor.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/motor/park.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/motor/clarke.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/filter/filtfilt.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/filter/sqr_ukf.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/filter/mcs.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL
                               ../src/linalg/linsolve_upper_triangular.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/add.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/linsolve_chol.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/expm.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/svd_golub_reinsch.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/pinv.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/linsolve_qr.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/eig_sym.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/mul.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/tran.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/nonlinsolve.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL
                               ../src/linalg/linsolve_lower_triangular.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/qr.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL
                               ../src/linalg/svd_jacobi_one_sided.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/sum.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/dlyap.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/balance.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/lup.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/linsolve_lup.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/eig.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/norm.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/linsolve_gauss.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/linsolve_markov.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/inv.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/det.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/cholupdate.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/chol.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/linalg/hankel.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/sysid/okid_era.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/sysid/rls.c)
  zephyr_library_sources_ifdef(CONFIG_CONTROL ../src/sysid/sqr_ukf_id.c)

endif()
